<section>
  <nz-modal
    [(nzVisible)]="isVisible"
    [nzTitle]="modalTitle"
    (nzOnCancel)="closeModal()"
    [nzOkDisabled]="automationForm.invalid"
    (nzOnOk)="onSubmit()"
    nzOkText="Save"
  >
    <ng-container *nzModalContent>
      <form nz-form [formGroup]="automationForm">
        <nz-form-item>
          <nz-form-label [nzSpan]="5" nzRequired>Name</nz-form-label>
          <nz-form-control
            nzErrorTip="The automation name must be a maximum of 50 characters."
            [nzSpan]="12"
            nzHasFeedback
          >
            <input
              nz-input
              formControlName="name"
              placeholder="Enter automation name"
            />
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-label [nzSpan]="5" nzRequired>Hostname</nz-form-label>
          <nz-form-control
            nzErrorTip="The automation hostname must be a maximum of 50 characters."
            [nzSpan]="12"
            nzHasFeedback
          >
            <input
              nz-input
              formControlName="host"
              placeholder="Enter automation hostname"
            />
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-label [nzSpan]="5" nzRequired>Port</nz-form-label>
          <nz-form-control
            nzErrorTip="The automation port must be a number between 1 and 65535."
            [nzSpan]="12"
            nzHasFeedback
          >
            <input
              type="number"
              nz-input
              formControlName="port"
              placeholder="Enter automation port"
            />
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-label [nzSpan]="5">Image</nz-form-label>
          <nz-form-control [nzSpan]="12">
            <ng-container *ngIf="!removeImage">
              <nz-upload
                nzType="drag"
                [nzMultiple]="false"
                nzName="image"
                [nzBeforeUpload]="beforeUpload"
              >
                <p class="ant-upload-drag-icon">
                  <i nz-icon nzType="inbox"></i>
                </p>
                <p class="ant-upload-text">
                  Click or drag image to this area to upload
                </p>
              </nz-upload>
            </ng-container>
            <!-- <button class="ant-button-remove-image" nz-button></button> -->
            <ng-container *ngIf="removeImage">
              <div class="ant-upload-text__information">
                <span nz-icon nzType="clear" nzTheme="outline"></span>
                <span
                  class="ant-button-remove-image"
                  (click)="deleteImage()"
                  style="color: green"
                >
                  Image Removed
                </span>
              </div>
            </ng-container>
            <ng-container *ngIf="!removeImage">
              <div class="ant-upload-text__information">
                <span nz-icon nzType="delete" nzTheme="outline"></span>
                <span class="ant-button-remove-image" (click)="deleteImage()"
                  >Remove Image</span
                >
              </div>
            </ng-container>
          </nz-form-control>
        </nz-form-item>
      </form>
    </ng-container>
    <ng-container *nzModalFooter>
      <button nz-button nzType="default" (click)="closeModal()">Cancel</button>
      <button
        nz-button
        nzType="primary"
        [disabled]="automationForm.invalid"
        (click)="onSubmit()"
        class="save-button"
      >
        <i nz-icon nzType="save"></i> Save
      </button>
    </ng-container>
  </nz-modal>
</section>
